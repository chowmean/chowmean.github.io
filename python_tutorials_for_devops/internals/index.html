



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.0">
    
    
      
        <title>Python internals - Python Training for Devops.</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.0284f74d.css">
      
      
    
    
      <script src="../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#python-internals" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="Python Training for Devops." class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Python Training for Devops.
            </span>
            <span class="md-header-nav__topic">
              
                Python internals
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href=".." title="Python Training for Devops." class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Python Training for Devops.
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../syntax/" title="Python Syntax" class="md-nav__link">
      Python Syntax
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../mem/" title="Memory Management" class="md-nav__link">
      Memory Management
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../gil/" title="Global Interpreter Lock" class="md-nav__link">
      Global Interpreter Lock
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../oops/" title="Object Oriented Programming" class="md-nav__link">
      Object Oriented Programming
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../tooling/" title="Basic Tooling for Python" class="md-nav__link">
      Basic Tooling for Python
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../best_practices/" title="Best Practices for programming and python" class="md-nav__link">
      Best Practices for programming and python
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../cliapp/" title="Creating a CLI application" class="md-nav__link">
      Creating a CLI application
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../logging/" title="Logging in application" class="md-nav__link">
      Logging in application
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../decorators/" title="Decorators" class="md-nav__link">
      Decorators
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Python internals
      </label>
    
    <a href="./" title="Python internals" class="md-nav__link md-nav__link--active">
      Python internals
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#compiler" title="Compiler:" class="md-nav__link">
    Compiler:
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#interpreter" title="Interpreter" class="md-nav__link">
    Interpreter
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-python-runs" title="How Python runs?" class="md-nav__link">
    How Python runs?
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-interpreter" title="The interpreter" class="md-nav__link">
    The interpreter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#programmers-view-of-interpreter" title="Programmer’s view of interpreter" class="md-nav__link">
    Programmer’s view of interpreter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pythons-view-of-interpreter" title="Python’s view of interpreter" class="md-nav__link">
    Python’s view of interpreter
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-does-virtual-machine-do" title="What does Virtual Machine do?" class="md-nav__link">
    What does Virtual Machine do?
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lastly-here-are-a-interesting-points" title="Lastly, here are a interesting points:" class="md-nav__link">
    Lastly, here are a interesting points:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#see-compiled-files" title="see compiled files:" class="md-nav__link">
    see compiled files:
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#question" title="Question:" class="md-nav__link">
    Question:
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../flask/" title="Flask" class="md-nav__link">
      Flask
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../flaskdb/" title="Python With Mysql" class="md-nav__link">
      Python With Mysql
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../flaskandorm/" title="Flask and ORM" class="md-nav__link">
      Flask and ORM
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../metrics/" title="Exposing metrics with python" class="md-nav__link">
      Exposing metrics with python
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../package/" title="Creating a python package" class="md-nav__link">
      Creating a python package
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../app/" title="Lets create and application" class="md-nav__link">
      Lets create and application
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../iterators/" title="Iterators and how to create one" class="md-nav__link">
      Iterators and how to create one
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../generators/" title="Generators" class="md-nav__link">
      Generators
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../threading/" title="Threading and Multiprocessing" class="md-nav__link">
      Threading and Multiprocessing
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#compiler" title="Compiler:" class="md-nav__link">
    Compiler:
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#interpreter" title="Interpreter" class="md-nav__link">
    Interpreter
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-python-runs" title="How Python runs?" class="md-nav__link">
    How Python runs?
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-interpreter" title="The interpreter" class="md-nav__link">
    The interpreter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#programmers-view-of-interpreter" title="Programmer’s view of interpreter" class="md-nav__link">
    Programmer’s view of interpreter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pythons-view-of-interpreter" title="Python’s view of interpreter" class="md-nav__link">
    Python’s view of interpreter
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-does-virtual-machine-do" title="What does Virtual Machine do?" class="md-nav__link">
    What does Virtual Machine do?
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lastly-here-are-a-interesting-points" title="Lastly, here are a interesting points:" class="md-nav__link">
    Lastly, here are a interesting points:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#see-compiled-files" title="see compiled files:" class="md-nav__link">
    see compiled files:
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#question" title="Question:" class="md-nav__link">
    Question:
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="python-internals">Python Internals</h1>
<h4 id="compiler">Compiler:</h4>
<p>Definition: A compiler is a computer program that transforms (translates) source code of a programming language (the source language) into another computer language (the target language). In most cases compilers are used to transform source code into executable program, i.e. they translate code from high-level programming languages into low (or lower) level languages, mostly assembly or machine code.</p>
<p>Ex:<br> 
1. Java<br> 
2. C++<br>
3. C#<br></p>
<h4 id="interpreter">Interpreter</h4>
<p>Definition: An interpreter is a computer program that executes instructions written in a programming language. Translation occurs at the same time as the program is being executed.
<br>It can either</p>
<ol>
<li>execute the source code directly or</li>
<li>translate the source code in a first step into a more efficient representation and execute this code</li>
</ol>
<p>Ex:<br>
1. java script<br>
2. Python</p>
<h3 id="how-python-runs">How Python runs?</h3>
<p>Have you ever thought how the Python code is actually executed by the Python interpreter? What steps are carried out to generate the final output of your Python script? This article answers all these questions in a simplistic manner!
<br></p>
<p><img alt="Interprer Interpreter" src="https://i.imgur.com/iQYveIP.png" /></p>
<h4 id="the-interpreter">The interpreter</h4>
<p>Interpreter is nothing but a software which can run your Python scripts.</p>
<p>Interestingly, it can be implemented in any programming language!</p>
<ol>
<li>CPython is the default interpreter for Python which is written in C programming language.</li>
<li>Jython is another popular implementation of python interpreter written using Java programming language.</li>
</ol>
<h4 id="programmers-view-of-interpreter">Programmer’s view of interpreter</h4>
<p>If you have been coding in Python for sometime, you must have heard about the interpreter  at least a few times.<br> 
From a programmer’s perspective, an interpreter is simply a software which executes the source code line by line.</p>
<p><img alt="Interprer Interpreter" src="https://i.imgur.com/c0PRvvI.png" /></p>
<p><br>For most of the Python programmers, an interpreter is like a black box.<br></p>
<h4 id="pythons-view-of-interpreter">Python’s view of interpreter</h4>
<p>Now, let us scan through the python interpreter and try to understand how it works.</p>
<p>Have a look at the diagram shown below:
<img alt="Interprer Interpreter" src="https://i.imgur.com/PJME67T.png" /></p>
<p>I hope you didn’t get amazed to see a compiler inside an interpreter!</p>
<p>From the figure above, it can be inferred that interpreter is made up of two parts:</p>
<ol>
<li>compiler</li>
<li>virtual machine<br></li>
</ol>
<p>What does compiler do?</p>
<p>Compiler compiles your source code (the statements in your file) into a format known as byte code. Compilation is simply a translation step!<br></p>
<p>Byte code is a:</p>
<ol>
<li>lower level,</li>
<li>platform independent,</li>
<li>efficient and</li>
<li>intermediate<br>
representation of your source code!</li>
</ol>
<p>Roughly, each of your source statements is translated into a group of byte code instructions.</p>
<p>The process of compilation in CPython interpreter’s compiler can be divided into 4 main parts:</p>
<ul>
<li>
<p><strong>Parse source code into a parse tree:</strong><br>
  Based on grammar rules of Python programming language, the source code is converted to a parse tree. Every node of the parse tree contains a part of your code.<br></p>
<p>Consider a simple arithmetic expression:
<pre>
14 + 2 * 3 - 6 / 2
</pre>
The parse tree for above expression looks like this:
<img alt="Interprer Interpreter" src="https://indianpythonista.files.wordpress.com/2018/01/parsetree.png" /></p>
</li>
<li>
<p><strong>Transform parse tree into an Abstract Syntax Tree:</strong><br>
   The abstract syntax tree (AST) is a high-level representation of the program structure.
    Each node of the tree denotes a construct occurring in the source code. The syntax is “abstract” in not representing every detail appearing in the real syntax.Consider the AST shown below for the parse tree example discussed above:
    <img alt="Interprer Interpreter" src="https://indianpythonista.files.wordpress.com/2018/01/ast.png" /></p>
</li>
<li><strong>Transform AST into a Control Flow Graph:</strong><br>
    A control flow graph is a directed graph that models the flow of a program using basic blocks. Each block contains the bytecode representation of program code inside it.</li>
<li><strong>Byte Code generation from CFG:</strong><br>
    CFGs are usually one step away from final code output. Code is directly generated from the basic blocks by doing a post-order depth-first search on the CFG following the edges.</li>
</ul>
<p>This byte code translation is performed to speed up the execution—byte code can be run much quicker than the original source code statements.</p>
<h3 id="what-does-virtual-machine-do">What does Virtual Machine do?</h3>
<p>As soon as source code gets converted to byte code, it is fed into PVM (Python Virtual Machine).<br>
It’s just a big loop that iterates through your byte code instructions, one by one, to carry out their operations. <strong>The PVM is the runtime engine of Python</strong>; it’s always present as part of the Python system, and is the component that truly runs your scripts. Technically, it’s just the last step of what is called the Python interpreter. </p>
<h4 id="lastly-here-are-a-interesting-points">Lastly, here are a interesting points:</h4>
<ol>
<li>PyPy is an implementation of Python which does not use an interpreter! It is implemented using something called just-in-time compiler!
Interestingly, it often runs faster than the standard implementation of Python, CPython.</li>
<li>Whenever a Python script is executed, the byte code is generated in memory and simply discarded when program exits.</li>
<li>But, if a Python module is imported, a .pyc file for the module is generated which contains its Byte code.
Thus, when the module is imported next time, the byte code from .pyc file is used, hence skipping the compilation step!</li>
</ol>
<h3 id="see-compiled-files">see compiled files:</h3>
<p><pre>
  python -m py_compile hello.py
</pre> </p>
<h3 id="question">Question:</h3>
<p>when we update source code of imported module, how does interpreter picks up that updated code?  </p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../decorators/" title="Decorators" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Decorators
              </span>
            </div>
          </a>
        
        
          <a href="../flask/" title="Flask" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Flask
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.245445c6.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
  </body>
</html>